<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>CLI Commands - The Rash Book - Shell Safety and Purification</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A comprehensive guide to Rash: shell safety, purification, and linting">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rash Book - Shell Safety and Purification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/paiml/bashrs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/paiml/bashrs/edit/main/book/src/reference/cli.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="cli-commands"><a class="header" href="#cli-commands">CLI Commands</a></h1>
<p>This is the reference for all bashrs CLI commands.</p>
<h2 id="bashrs-bench---scientific-benchmarking"><a class="header" href="#bashrs-bench---scientific-benchmarking"><code>bashrs bench</code> - Scientific Benchmarking</a></h2>
<p>Benchmark shell scripts with scientific rigor, measuring execution time and optionally memory usage.</p>
<h3 id="usage"><a class="header" href="#usage">Usage</a></h3>
<pre><code class="language-bash">bashrs bench [OPTIONS] &lt;SCRIPT&gt;...
</code></pre>
<h3 id="arguments"><a class="header" href="#arguments">Arguments</a></h3>
<ul>
<li><code>&lt;SCRIPT&gt;...</code> - Shell script(s) to benchmark</li>
</ul>
<h3 id="options"><a class="header" href="#options">Options</a></h3>
<ul>
<li><code>-w, --warmup &lt;N&gt;</code> - Number of warmup iterations (default: 3)</li>
<li><code>-i, --iterations &lt;N&gt;</code> - Number of measured iterations (default: 10)</li>
<li><code>-o, --output &lt;FILE&gt;</code> - Output results to JSON file</li>
<li><code>-s, --strict</code> - Enable quality gates (lint + determinism checks)</li>
<li><code>--verify-determinism</code> - Verify script produces identical output</li>
<li><code>--show-raw</code> - Show raw iteration times</li>
<li><code>-q, --quiet</code> - Suppress progress output</li>
<li><code>-m, --measure-memory</code> - Measure memory usage (requires <code>/usr/bin/time</code>)</li>
</ul>
<h3 id="examples"><a class="header" href="#examples">Examples</a></h3>
<p>Basic benchmark:</p>
<pre><code class="language-bash">bashrs bench script.sh
</code></pre>
<p>With memory measurement:</p>
<pre><code class="language-bash">bashrs bench script.sh --measure-memory
</code></pre>
<p>Custom iterations and warmup:</p>
<pre><code class="language-bash">bashrs bench script.sh --iterations 20 --warmup 5
</code></pre>
<p>Compare multiple scripts:</p>
<pre><code class="language-bash">bashrs bench fast.sh slow.sh --measure-memory
</code></pre>
<p>JSON output for automation:</p>
<pre><code class="language-bash">bashrs bench script.sh --output results.json --quiet
</code></pre>
<p>With quality gates:</p>
<pre><code class="language-bash">bashrs bench script.sh --strict --verify-determinism
</code></pre>
<h3 id="output"><a class="header" href="#output">Output</a></h3>
<p>The bench command provides:</p>
<ul>
<li><strong>Statistical metrics</strong>: Mean, median, standard deviation, min, max</li>
<li><strong>Memory statistics</strong> (with <code>-m</code>): Mean, median, min, max, peak RSS in KB</li>
<li><strong>Environment metadata</strong>: CPU, RAM, OS, hostname</li>
<li><strong>Console display</strong>: Formatted output with results</li>
<li><strong>JSON export</strong>: Machine-readable format for automation</li>
</ul>
<h3 id="memory-measurement"><a class="header" href="#memory-measurement">Memory Measurement</a></h3>
<p>When using <code>--measure-memory</code> / <code>-m</code>, bashrs measures the maximum resident set size (RSS) during script execution using <code>/usr/bin/time</code>. This provides accurate memory profiling:</p>
<pre><code class="language-text">ðŸ’¾ Memory Usage
  Mean:    3456.00 KB
  Median:  3456.00 KB
  Min:     3456.00 KB
  Max:     3456.00 KB
  Peak:    3456.00 KB
</code></pre>
<p><strong>Requirements</strong>:</p>
<ul>
<li><code>/usr/bin/time</code> must be available (standard on Linux/Unix systems)</li>
<li>Memory measurement adds negligible overhead (~1-2%)</li>
</ul>
<h3 id="quality-gates"><a class="header" href="#quality-gates">Quality Gates</a></h3>
<p>Use <code>--strict</code> to run bashrs linter before benchmarking:</p>
<ul>
<li>Ensures scripts follow best practices</li>
<li>Catches common errors before performance testing</li>
<li>Fails benchmark if lint errors are found</li>
</ul>
<p>Use <code>--verify-determinism</code> to check output consistency:</p>
<ul>
<li>Runs script multiple times</li>
<li>Compares output across runs</li>
<li>Fails if non-deterministic behavior detected (e.g., $RANDOM, timestamps)</li>
</ul>
<h2 id="bashrs-build---transpile-rust-to-shell-script"><a class="header" href="#bashrs-build---transpile-rust-to-shell-script"><code>bashrs build</code> - Transpile Rust to Shell Script</a></h2>
<p>Transpiles Rust source code to deterministic POSIX shell scripts.</p>
<h3 id="usage-1"><a class="header" href="#usage-1">Usage</a></h3>
<pre><code class="language-bash">bashrs build &lt;INPUT&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-1"><a class="header" href="#arguments-1">Arguments</a></h3>
<ul>
<li><code>&lt;INPUT&gt;</code> - Input Rust file</li>
</ul>
<h3 id="options-1"><a class="header" href="#options-1">Options</a></h3>
<ul>
<li><code>-o, --output &lt;FILE&gt;</code> - Output shell script file (default: <code>install.sh</code>)</li>
<li><code>--emit-proof</code> - Generate formal verification proof file</li>
<li><code>--no-optimize</code> - Disable code optimizations</li>
</ul>
<h3 id="examples-1"><a class="header" href="#examples-1">Examples</a></h3>
<p>Basic transpilation:</p>
<pre><code class="language-bash">bashrs build src/main.rs -o install.sh
</code></pre>
<p>With verification proof:</p>
<pre><code class="language-bash">bashrs build src/install.rs -o install.sh --emit-proof
</code></pre>
<p>Without optimizations (for debugging):</p>
<pre><code class="language-bash">bashrs build src/deploy.rs --no-optimize -o deploy.sh
</code></pre>
<h3 id="output-1"><a class="header" href="#output-1">Output</a></h3>
<p>The build command produces:</p>
<ul>
<li><strong>Shell script</strong>: POSIX-compliant shell script at specified output path</li>
<li><strong>Verification proof</strong> (with <code>--emit-proof</code>): <code>.proof</code> file with formal verification evidence</li>
<li><strong>Determinism</strong>: Same Rust input always produces identical shell output</li>
<li><strong>Safety</strong>: No injection vectors in generated scripts</li>
</ul>
<hr />
<h2 id="bashrs-check---verify-rust-compatibility"><a class="header" href="#bashrs-check---verify-rust-compatibility"><code>bashrs check</code> - Verify Rust Compatibility</a></h2>
<p>Checks if Rust source is compatible with Rash transpiler (no unsupported features).</p>
<h3 id="usage-2"><a class="header" href="#usage-2">Usage</a></h3>
<pre><code class="language-bash">bashrs check &lt;INPUT&gt;
</code></pre>
<h3 id="arguments-2"><a class="header" href="#arguments-2">Arguments</a></h3>
<ul>
<li><code>&lt;INPUT&gt;</code> - Input Rust file to check</li>
</ul>
<h3 id="examples-2"><a class="header" href="#examples-2">Examples</a></h3>
<p>Check compatibility:</p>
<pre><code class="language-bash">bashrs check src/install.rs
</code></pre>
<p>Verify multiple files:</p>
<pre><code class="language-bash">for f in src/*.rs; do bashrs check "$f"; done
</code></pre>
<h3 id="output-2"><a class="header" href="#output-2">Output</a></h3>
<ul>
<li><strong>Success</strong>: "âœ“ Compatible with Rash transpiler"</li>
<li><strong>Error</strong>: List of incompatible features found with line numbers</li>
<li><strong>Exit codes</strong>: 0 for compatible, 1 for incompatible</li>
</ul>
<hr />
<h2 id="bashrs-init---initialize-new-rash-project"><a class="header" href="#bashrs-init---initialize-new-rash-project"><code>bashrs init</code> - Initialize New Rash Project</a></h2>
<p>Scaffolds a new Rash project with Cargo.toml and basic structure.</p>
<h3 id="usage-3"><a class="header" href="#usage-3">Usage</a></h3>
<pre><code class="language-bash">bashrs init [PATH] [OPTIONS]
</code></pre>
<h3 id="arguments-3"><a class="header" href="#arguments-3">Arguments</a></h3>
<ul>
<li><code>[PATH]</code> - Project directory (default: current directory <code>.</code>)</li>
</ul>
<h3 id="options-2"><a class="header" href="#options-2">Options</a></h3>
<ul>
<li><code>--name &lt;NAME&gt;</code> - Project name (defaults to directory name)</li>
</ul>
<h3 id="examples-3"><a class="header" href="#examples-3">Examples</a></h3>
<p>Initialize in current directory:</p>
<pre><code class="language-bash">bashrs init
</code></pre>
<p>Create new project:</p>
<pre><code class="language-bash">bashrs init my-installer --name my-app
</code></pre>
<p>Initialize with custom name:</p>
<pre><code class="language-bash">mkdir bootstrap &amp;&amp; cd bootstrap
bashrs init --name deployment-tool
</code></pre>
<h3 id="created-files"><a class="header" href="#created-files">Created Files</a></h3>
<ul>
<li><code>Cargo.toml</code> - Configured for Rash with proper dependencies</li>
<li><code>src/</code> - Source directory</li>
<li><code>src/main.rs</code> - Example Rust source file</li>
<li><code>.gitignore</code> - Standard Rust gitignore</li>
</ul>
<hr />
<h2 id="bashrs-verify---verify-shell-script-against-rust-source"><a class="header" href="#bashrs-verify---verify-shell-script-against-rust-source"><code>bashrs verify</code> - Verify Shell Script Against Rust Source</a></h2>
<p>Ensures generated shell script matches original Rust source behavior.</p>
<h3 id="usage-4"><a class="header" href="#usage-4">Usage</a></h3>
<pre><code class="language-bash">bashrs verify &lt;RUST_SOURCE&gt; &lt;SHELL_SCRIPT&gt;
</code></pre>
<h3 id="arguments-4"><a class="header" href="#arguments-4">Arguments</a></h3>
<ul>
<li><code>&lt;RUST_SOURCE&gt;</code> - Original Rust source file</li>
<li><code>&lt;SHELL_SCRIPT&gt;</code> - Generated shell script to verify</li>
</ul>
<h3 id="examples-4"><a class="header" href="#examples-4">Examples</a></h3>
<p>Verify generated script:</p>
<pre><code class="language-bash">bashrs build src/install.rs -o install.sh
bashrs verify src/install.rs install.sh
</code></pre>
<p>Verify with strict mode:</p>
<pre><code class="language-bash">bashrs verify src/deploy.rs deploy.sh --strict
</code></pre>
<h3 id="output-3"><a class="header" href="#output-3">Output</a></h3>
<p>Verification report showing:</p>
<ul>
<li><strong>Behavioral equivalence</strong>: Whether outputs match</li>
<li><strong>Determinism check</strong>: Whether script is deterministic</li>
<li><strong>Safety validation</strong>: Security issues detected</li>
<li><strong>Discrepancies</strong>: Any differences found with line numbers</li>
</ul>
<hr />
<h2 id="bashrs-inspect---generate-formal-verification-report"><a class="header" href="#bashrs-inspect---generate-formal-verification-report"><code>bashrs inspect</code> - Generate Formal Verification Report</a></h2>
<p>Generates detailed verification inspection report from AST.</p>
<h3 id="usage-5"><a class="header" href="#usage-5">Usage</a></h3>
<pre><code class="language-bash">bashrs inspect &lt;INPUT&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-5"><a class="header" href="#arguments-5">Arguments</a></h3>
<ul>
<li><code>&lt;INPUT&gt;</code> - AST file (JSON) or inline AST specification</li>
</ul>
<h3 id="options-3"><a class="header" href="#options-3">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>markdown</code>, <code>json</code>, <code>html</code> (default: <code>markdown</code>)</li>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file (defaults to stdout)</li>
<li><code>--detailed</code> - Include detailed trace information</li>
</ul>
<h3 id="examples-5"><a class="header" href="#examples-5">Examples</a></h3>
<p>Inspect AST:</p>
<pre><code class="language-bash">bashrs build src/install.rs --emit-proof
bashrs inspect ast.json --format html -o report.html
</code></pre>
<p>Detailed markdown report:</p>
<pre><code class="language-bash">bashrs inspect ast.json --detailed -o inspection.md
</code></pre>
<p>JSON output for automation:</p>
<pre><code class="language-bash">bashrs inspect ast.json --format json -o report.json
</code></pre>
<h3 id="output-sections"><a class="header" href="#output-sections">Output Sections</a></h3>
<ul>
<li><strong>AST Analysis</strong>: Abstract syntax tree structure</li>
<li><strong>Verification Traces</strong>: Detailed execution paths</li>
<li><strong>Safety Checks</strong>: Security validation results</li>
<li><strong>Determinism Proof</strong>: Mathematical proof of determinism</li>
<li><strong>Transformation Log</strong>: All applied transformations</li>
</ul>
<hr />
<h2 id="bashrs-compile---compile-to-standalone-binary"><a class="header" href="#bashrs-compile---compile-to-standalone-binary"><code>bashrs compile</code> - Compile to Standalone Binary</a></h2>
<p>Compiles Rust source to standalone executable or container image.</p>
<h3 id="usage-6"><a class="header" href="#usage-6">Usage</a></h3>
<pre><code class="language-bash">bashrs compile &lt;RUST_SOURCE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-6"><a class="header" href="#arguments-6">Arguments</a></h3>
<ul>
<li><code>&lt;RUST_SOURCE&gt;</code> - Input Rust source file</li>
</ul>
<h3 id="options-4"><a class="header" href="#options-4">Options</a></h3>
<ul>
<li><code>-o, --output &lt;FILE&gt;</code> - Output binary path (required)</li>
<li><code>--runtime &lt;RUNTIME&gt;</code> - Runtime: <code>dash</code>, <code>busybox</code>, <code>minimal</code> (default: <code>dash</code>)</li>
<li><code>--self-extracting</code> - Create self-extracting script instead of binary</li>
<li><code>--container</code> - Build distroless container</li>
<li><code>--container-format &lt;FORMAT&gt;</code> - Container format: <code>oci</code>, <code>docker</code> (default: <code>oci</code>)</li>
</ul>
<h3 id="examples-6"><a class="header" href="#examples-6">Examples</a></h3>
<p>Compile to binary with dash runtime:</p>
<pre><code class="language-bash">bashrs compile src/install.rs -o my-installer --runtime dash
</code></pre>
<p>Self-extracting script:</p>
<pre><code class="language-bash">bashrs compile src/bootstrap.rs -o bootstrap.sh --self-extracting
</code></pre>
<p>OCI container image:</p>
<pre><code class="language-bash">bashrs compile src/deploy.rs -o deploy-image --container --container-format oci
</code></pre>
<p>Minimal binary (smallest size):</p>
<pre><code class="language-bash">bashrs compile src/tool.rs -o tool --runtime minimal
</code></pre>
<h3 id="runtime-options"><a class="header" href="#runtime-options">Runtime Options</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Runtime</th><th>Size</th><th>Features</th><th>Use Case</th></tr></thead><tbody>
<tr><td><code>dash</code></td><td>~180KB</td><td>Full POSIX</td><td>Production deployments</td></tr>
<tr><td><code>busybox</code></td><td>~900KB</td><td>Extended utilities</td><td>Full-featured installers</td></tr>
<tr><td><code>minimal</code></td><td>~50KB</td><td>Core only</td><td>Minimal footprint</td></tr>
</tbody></table>
</div>
<h3 id="container-features"><a class="header" href="#container-features">Container Features</a></h3>
<ul>
<li><strong>Distroless base</strong>: Minimal attack surface</li>
<li><strong>OCI/Docker compatible</strong>: Works with all container runtimes</li>
<li><strong>Single-file deployment</strong>: No dependencies</li>
<li><strong>Deterministic builds</strong>: Same source = same binary</li>
</ul>
<hr />
<h2 id="bashrs-lint---lint-shell-scripts-for-safety-issues"><a class="header" href="#bashrs-lint---lint-shell-scripts-for-safety-issues"><code>bashrs lint</code> - Lint Shell Scripts for Safety Issues</a></h2>
<p>Analyzes shell scripts or Rust source for safety, determinism, and idempotency issues.</p>
<h3 id="usage-7"><a class="header" href="#usage-7">Usage</a></h3>
<pre><code class="language-bash">bashrs lint &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-7"><a class="header" href="#arguments-7">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Shell script or Rust source to lint</li>
</ul>
<h3 id="options-5"><a class="header" href="#options-5">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code>, <code>sarif</code> (default: <code>human</code>)</li>
<li><code>--fix</code> - Enable auto-fix suggestions (SAFE fixes only)</li>
<li><code>--fix-assumptions</code> - Apply fixes with assumptions (requires <code>--fix</code>)</li>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file for fixed content</li>
</ul>
<h3 id="examples-7"><a class="header" href="#examples-7">Examples</a></h3>
<p>Basic linting:</p>
<pre><code class="language-bash">bashrs lint deploy.sh
</code></pre>
<p>JSON output for CI/CD:</p>
<pre><code class="language-bash">bashrs lint script.sh --format json
</code></pre>
<p>Auto-fix safe issues:</p>
<pre><code class="language-bash">bashrs lint deploy.sh --fix -o deploy-fixed.sh
</code></pre>
<p>Fix with assumptions (more aggressive):</p>
<pre><code class="language-bash">bashrs lint src/install.rs --fix --fix-assumptions -o src/install-fixed.rs
</code></pre>
<p>SARIF output for GitHub Code Scanning:</p>
<pre><code class="language-bash">bashrs lint script.sh --format sarif &gt; results.sarif
</code></pre>
<h3 id="detected-issues"><a class="header" href="#detected-issues">Detected Issues</a></h3>
<p><strong>Security (SEC001-SEC008)</strong>:</p>
<ul>
<li>Command injection via eval</li>
<li>Insecure SSL/TLS</li>
<li>Printf injection</li>
<li>Unsafe symlinks</li>
<li>And 4 more security rules</li>
</ul>
<p><strong>Determinism (DET001-DET006)</strong>:</p>
<ul>
<li>$RANDOM usage</li>
<li>Timestamps (date, $(date))</li>
<li>Process IDs ($$, $PPID)</li>
<li>Hostnames</li>
<li>UUIDs/GUIDs</li>
<li>Network queries</li>
</ul>
<p><strong>Idempotency (IDEM001-IDEM006)</strong>:</p>
<ul>
<li>mkdir without -p</li>
<li>rm without -f</li>
<li>ln -s without cleanup</li>
<li>Appending to files (&gt;&gt;)</li>
<li>Creating files with &gt;</li>
<li>Database inserts without guards</li>
</ul>
<h3 id="fix-safety-levels"><a class="header" href="#fix-safety-levels">Fix Safety Levels</a></h3>
<ul>
<li><strong>SAFE</strong>: No assumptions needed (e.g., add -p to mkdir)</li>
<li><strong>SAFE-WITH-ASSUMPTIONS</strong>: Requires context (e.g., variable always set)</li>
<li><strong>MANUAL</strong>: Requires human review</li>
</ul>
<hr />
<h2 id="bashrs-purify---purify-bash-scripts"><a class="header" href="#bashrs-purify---purify-bash-scripts"><code>bashrs purify</code> - Purify Bash Scripts</a></h2>
<p>Transforms bash scripts into deterministic, idempotent, POSIX-compliant shell scripts.</p>
<h3 id="usage-8"><a class="header" href="#usage-8">Usage</a></h3>
<pre><code class="language-bash">bashrs purify &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-8"><a class="header" href="#arguments-8">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input bash script file</li>
</ul>
<h3 id="options-6"><a class="header" href="#options-6">Options</a></h3>
<ul>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file (defaults to stdout)</li>
<li><code>--report</code> - Show detailed transformation report</li>
<li><code>--with-tests</code> - Generate test suite for purified script</li>
<li><code>--property-tests</code> - Generate property-based tests (100+ cases)</li>
</ul>
<h3 id="examples-8"><a class="header" href="#examples-8">Examples</a></h3>
<p>Basic purification:</p>
<pre><code class="language-bash">bashrs purify deploy.sh -o deploy-purified.sh
</code></pre>
<p>With detailed report:</p>
<pre><code class="language-bash">bashrs purify messy.sh -o clean.sh --report
</code></pre>
<p>Generate test suite:</p>
<pre><code class="language-bash">bashrs purify script.sh --with-tests --property-tests
</code></pre>
<p>Purify to stdout:</p>
<pre><code class="language-bash">bashrs purify input.sh &gt; output.sh
</code></pre>
<h3 id="transformations-applied"><a class="header" href="#transformations-applied">Transformations Applied</a></h3>
<p><strong>Determinism</strong>:</p>
<ul>
<li><code>$RANDOM</code> â†’ version-based IDs</li>
<li><code>$(date +%s)</code> â†’ fixed release tags</li>
<li><code>$$</code> (process ID) â†’ deterministic IDs</li>
<li><code>$(hostname)</code> â†’ configuration parameter</li>
</ul>
<p><strong>Idempotency</strong>:</p>
<ul>
<li><code>mkdir</code> â†’ <code>mkdir -p</code></li>
<li><code>rm</code> â†’ <code>rm -f</code></li>
<li><code>ln -s</code> â†’ <code>rm -f</code> + <code>ln -s</code></li>
<li><code>&gt;&gt;</code> (append) â†’ check + append guards</li>
<li><code>&gt;</code> (create) â†’ idempotent alternatives</li>
</ul>
<p><strong>Safety</strong>:</p>
<ul>
<li>Unquoted variables â†’ quoted variables</li>
<li><code>eval</code> with user input â†’ safer alternatives</li>
<li>Insecure SSL â†’ verified SSL</li>
</ul>
<p><strong>POSIX Compliance</strong>:</p>
<ul>
<li>Bash arrays â†’ space-separated lists</li>
<li><code>[[ ]]</code> â†’ <code>[ ]</code></li>
<li>Bash string manipulation â†’ POSIX commands</li>
<li><code>local</code> keyword â†’ naming conventions</li>
</ul>
<h3 id="verification"><a class="header" href="#verification">Verification</a></h3>
<p>All purified scripts:</p>
<ul>
<li>âœ… Pass <code>shellcheck -s sh</code></li>
<li>âœ… Run identically in sh, dash, ash, bash</li>
<li>âœ… Safe to re-run multiple times</li>
<li>âœ… Produce deterministic output</li>
</ul>
<hr />
<h2 id="bashrs-make-parse---parse-makefile-to-ast"><a class="header" href="#bashrs-make-parse---parse-makefile-to-ast"><code>bashrs make parse</code> - Parse Makefile to AST</a></h2>
<p>Parses Makefile into abstract syntax tree.</p>
<h3 id="usage-9"><a class="header" href="#usage-9">Usage</a></h3>
<pre><code class="language-bash">bashrs make parse &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-9"><a class="header" href="#arguments-9">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input Makefile</li>
</ul>
<h3 id="options-7"><a class="header" href="#options-7">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>text</code>, <code>json</code>, <code>debug</code> (default: <code>text</code>)</li>
</ul>
<h3 id="examples-9"><a class="header" href="#examples-9">Examples</a></h3>
<p>Parse Makefile to text:</p>
<pre><code class="language-bash">bashrs make parse Makefile
</code></pre>
<p>JSON AST for tooling:</p>
<pre><code class="language-bash">bashrs make parse Makefile --format json &gt; makefile-ast.json
</code></pre>
<p>Debug output:</p>
<pre><code class="language-bash">bashrs make parse Makefile --format debug
</code></pre>
<h3 id="output-4"><a class="header" href="#output-4">Output</a></h3>
<p><strong>Text format</strong>: Human-readable AST
<strong>JSON format</strong>: Machine-readable structured data
<strong>Debug format</strong>: Full internal representation</p>
<hr />
<h2 id="bashrs-make-purify---purify-makefile"><a class="header" href="#bashrs-make-purify---purify-makefile"><code>bashrs make purify</code> - Purify Makefile</a></h2>
<p>Transforms Makefile into deterministic, idempotent form.</p>
<h3 id="usage-10"><a class="header" href="#usage-10">Usage</a></h3>
<pre><code class="language-bash">bashrs make purify &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-10"><a class="header" href="#arguments-10">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input Makefile</li>
</ul>
<h3 id="options-8"><a class="header" href="#options-8">Options</a></h3>
<ul>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file (defaults to stdout or in-place with <code>--fix</code>)</li>
<li><code>--fix</code> - Apply fixes in-place (creates <code>.bak</code> backup)</li>
<li><code>--report</code> - Show detailed transformation report</li>
<li><code>--format &lt;FORMAT&gt;</code> - Report format: <code>human</code>, <code>json</code>, <code>markdown</code> (default: <code>human</code>)</li>
<li><code>--with-tests</code> - Generate test suite</li>
<li><code>--property-tests</code> - Generate property-based tests (100+ cases)</li>
</ul>
<h3 id="examples-10"><a class="header" href="#examples-10">Examples</a></h3>
<p>Purify Makefile:</p>
<pre><code class="language-bash">bashrs make purify Makefile -o Makefile.purified
</code></pre>
<p>Fix in-place with backup:</p>
<pre><code class="language-bash">bashrs make purify Makefile --fix
</code></pre>
<p>With detailed report:</p>
<pre><code class="language-bash">bashrs make purify Makefile --fix --report --with-tests
</code></pre>
<h3 id="transformations"><a class="header" href="#transformations">Transformations</a></h3>
<ul>
<li>Non-deterministic timestamps â†’ fixed versions</li>
<li>Non-idempotent operations â†’ idempotent alternatives</li>
<li>Unsafe recipes â†’ safe equivalents</li>
<li><code>.PHONY</code> declarations validated</li>
</ul>
<hr />
<h2 id="bashrs-make-lint---lint-makefile"><a class="header" href="#bashrs-make-lint---lint-makefile"><code>bashrs make lint</code> - Lint Makefile</a></h2>
<p>Analyzes Makefile for safety and quality issues.</p>
<h3 id="usage-11"><a class="header" href="#usage-11">Usage</a></h3>
<pre><code class="language-bash">bashrs make lint &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-11"><a class="header" href="#arguments-11">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input Makefile</li>
</ul>
<h3 id="options-9"><a class="header" href="#options-9">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code>, <code>sarif</code> (default: <code>human</code>)</li>
<li><code>--fix</code> - Apply automatic fixes</li>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file (defaults to in-place with <code>--fix</code>)</li>
<li><code>--rules &lt;RULES&gt;</code> - Filter by specific rules (comma-separated: <code>MAKE001,MAKE003</code>)</li>
</ul>
<h3 id="examples-11"><a class="header" href="#examples-11">Examples</a></h3>
<p>Lint Makefile:</p>
<pre><code class="language-bash">bashrs make lint Makefile
</code></pre>
<p>JSON output:</p>
<pre><code class="language-bash">bashrs make lint Makefile --format json
</code></pre>
<p>Auto-fix issues:</p>
<pre><code class="language-bash">bashrs make lint Makefile --fix
</code></pre>
<p>Filter specific rules:</p>
<pre><code class="language-bash">bashrs make lint Makefile --rules MAKE001,MAKE002
</code></pre>
<h3 id="detected-issues-1"><a class="header" href="#detected-issues-1">Detected Issues</a></h3>
<ul>
<li><strong>MAKE001</strong>: Missing <code>.PHONY</code> declarations</li>
<li><strong>MAKE002</strong>: Non-deterministic recipes</li>
<li><strong>MAKE003</strong>: Non-idempotent operations</li>
<li><strong>MAKE004</strong>: Unsafe shell commands</li>
<li><strong>MAKE005</strong>: Missing dependencies</li>
</ul>
<hr />
<h2 id="bashrs-config-analyze---analyze-shell-configuration-file"><a class="header" href="#bashrs-config-analyze---analyze-shell-configuration-file"><code>bashrs config analyze</code> - Analyze Shell Configuration File</a></h2>
<p>Analyzes shell configuration files (.bashrc, .zshrc, .profile, etc.) for issues.</p>
<h3 id="usage-12"><a class="header" href="#usage-12">Usage</a></h3>
<pre><code class="language-bash">bashrs config analyze &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-12"><a class="header" href="#arguments-12">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input config file</li>
</ul>
<h3 id="options-10"><a class="header" href="#options-10">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code> (default: <code>human</code>)</li>
</ul>
<h3 id="examples-12"><a class="header" href="#examples-12">Examples</a></h3>
<p>Analyze .bashrc:</p>
<pre><code class="language-bash">bashrs config analyze ~/.bashrc
</code></pre>
<p>JSON output:</p>
<pre><code class="language-bash">bashrs config analyze ~/.zshrc --format json
</code></pre>
<p>Check .profile:</p>
<pre><code class="language-bash">bashrs config analyze ~/.profile
</code></pre>
<h3 id="analysis-results"><a class="header" href="#analysis-results">Analysis Results</a></h3>
<p><strong>PATH Issues</strong>:</p>
<ul>
<li>Duplicate entries</li>
<li>Non-existent directories</li>
<li>Problematic order</li>
</ul>
<p><strong>Environment Issues</strong>:</p>
<ul>
<li>Non-deterministic variables</li>
<li>Conflicting definitions</li>
<li>Missing quotes</li>
</ul>
<p><strong>Security Issues</strong>:</p>
<ul>
<li>Command injection risks</li>
<li>Insecure SSL usage</li>
<li>Unsafe eval</li>
</ul>
<p><strong>Idempotency Issues</strong>:</p>
<ul>
<li>Non-idempotent sourcing</li>
<li>Append-only operations</li>
<li>Missing guards</li>
</ul>
<hr />
<h2 id="bashrs-config-lint---lint-shell-configuration-file"><a class="header" href="#bashrs-config-lint---lint-shell-configuration-file"><code>bashrs config lint</code> - Lint Shell Configuration File</a></h2>
<p>Lints shell configuration files for safety issues.</p>
<h3 id="usage-13"><a class="header" href="#usage-13">Usage</a></h3>
<pre><code class="language-bash">bashrs config lint &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-13"><a class="header" href="#arguments-13">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input config file</li>
</ul>
<h3 id="options-11"><a class="header" href="#options-11">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code> (default: <code>human</code>)</li>
</ul>
<h3 id="examples-13"><a class="header" href="#examples-13">Examples</a></h3>
<p>Lint .bashrc:</p>
<pre><code class="language-bash">bashrs config lint ~/.bashrc
</code></pre>
<p>JSON output for automation:</p>
<pre><code class="language-bash">bashrs config lint ~/.zshrc --format json
</code></pre>
<h3 id="detected-issues-2"><a class="header" href="#detected-issues-2">Detected Issues</a></h3>
<ul>
<li>CONFIG-001: Duplicate PATH entry</li>
<li>CONFIG-002: Non-existent PATH entry</li>
<li>CONFIG-003: Non-deterministic environment variable</li>
<li>CONFIG-004: Conflicting environment variable</li>
<li>Plus all SEC, DET, IDEM rules</li>
</ul>
<hr />
<h2 id="bashrs-config-purify---purify-shell-configuration-file"><a class="header" href="#bashrs-config-purify---purify-shell-configuration-file"><code>bashrs config purify</code> - Purify Shell Configuration File</a></h2>
<p>Purifies and fixes shell configuration files automatically.</p>
<h3 id="usage-14"><a class="header" href="#usage-14">Usage</a></h3>
<pre><code class="language-bash">bashrs config purify &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-14"><a class="header" href="#arguments-14">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input config file</li>
</ul>
<h3 id="options-12"><a class="header" href="#options-12">Options</a></h3>
<ul>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file (defaults to stdout, or in-place with <code>--fix</code>)</li>
<li><code>--fix</code> - Apply fixes in-place (creates timestamped backup)</li>
<li><code>--no-backup</code> - Don't create backup (dangerous!)</li>
<li><code>--dry-run</code> - Show what would be changed without applying</li>
</ul>
<h3 id="examples-14"><a class="header" href="#examples-14">Examples</a></h3>
<p>Dry run (preview changes):</p>
<pre><code class="language-bash">bashrs config purify ~/.bashrc --dry-run
</code></pre>
<p>Purify to new file:</p>
<pre><code class="language-bash">bashrs config purify ~/.bashrc -o ~/.bashrc-purified
</code></pre>
<p>Fix in-place with backup:</p>
<pre><code class="language-bash">bashrs config purify ~/.bashrc --fix
</code></pre>
<p>Fix without backup (dangerous):</p>
<pre><code class="language-bash">bashrs config purify ~/.bashrc --fix --no-backup
</code></pre>
<h3 id="safety-features"><a class="header" href="#safety-features">Safety Features</a></h3>
<ul>
<li><strong>Timestamped backups</strong>: <code>~/.bashrc.backup.20251104_143022</code></li>
<li><strong>Dry-run mode</strong>: Preview changes without applying</li>
<li><strong>Idempotent</strong>: Safe to run multiple times</li>
<li><strong>Validation</strong>: All changes verified before applying</li>
</ul>
<hr />
<h2 id="bashrs-repl---interactive-repl"><a class="header" href="#bashrs-repl---interactive-repl"><code>bashrs repl</code> - Interactive REPL</a></h2>
<p>Starts interactive REPL for bash script analysis and debugging.</p>
<h3 id="usage-15"><a class="header" href="#usage-15">Usage</a></h3>
<pre><code class="language-bash">bashrs repl [OPTIONS]
</code></pre>
<h3 id="options-13"><a class="header" href="#options-13">Options</a></h3>
<ul>
<li><code>--debug</code> - Enable debug mode</li>
<li><code>--sandboxed</code> - Enable sandboxed execution</li>
<li><code>--max-memory &lt;MB&gt;</code> - Maximum memory usage in MB (default: 100)</li>
<li><code>--timeout &lt;SECS&gt;</code> - Timeout in seconds (default: 30)</li>
<li><code>--max-depth &lt;DEPTH&gt;</code> - Maximum recursion depth (default: 100)</li>
</ul>
<h3 id="examples-15"><a class="header" href="#examples-15">Examples</a></h3>
<p>Start REPL:</p>
<pre><code class="language-bash">bashrs repl
</code></pre>
<p>Debug mode:</p>
<pre><code class="language-bash">bashrs repl --debug
</code></pre>
<p>Sandboxed with limits:</p>
<pre><code class="language-bash">bashrs repl --sandboxed --max-memory 50 --timeout 10
</code></pre>
<h3 id="repl-features"><a class="header" href="#repl-features">REPL Features</a></h3>
<p><strong>Interactive Commands</strong>:</p>
<ul>
<li>Parse bash expressions and view AST</li>
<li>Purify scripts and see transformations</li>
<li>Lint for issues with real-time feedback</li>
<li>Explain bash constructs</li>
<li>Debug execution flow</li>
<li>View variable state</li>
<li>Command completion</li>
<li>Syntax highlighting</li>
</ul>
<p><strong>Example Session</strong>:</p>
<pre><code>bashrs REPL v6.31.0
&gt;&gt;&gt; x=5
&gt;&gt;&gt; echo $x
5
&gt;&gt;&gt; echo ${x:-default}
5
&gt;&gt;&gt; for i in 1 2 3; do echo $i; done
1
2
3
&gt;&gt;&gt; :help
Available commands:
  :parse &lt;script&gt;   - Parse and show AST
  :purify &lt;script&gt;  - Purify and show result
  :lint &lt;script&gt;    - Lint and show issues
  :quit             - Exit REPL
</code></pre>
<hr />
<h2 id="bashrs-test---run-bash-script-tests"><a class="header" href="#bashrs-test---run-bash-script-tests"><code>bashrs test</code> - Run Bash Script Tests</a></h2>
<p>Runs test suite for bash scripts.</p>
<h3 id="usage-16"><a class="header" href="#usage-16">Usage</a></h3>
<pre><code class="language-bash">bashrs test &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-15"><a class="header" href="#arguments-15">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input bash script file</li>
</ul>
<h3 id="options-14"><a class="header" href="#options-14">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code>, <code>junit</code> (default: <code>human</code>)</li>
<li><code>--detailed</code> - Show detailed test results</li>
<li><code>--pattern &lt;PATTERN&gt;</code> - Run only tests matching pattern</li>
</ul>
<h3 id="examples-16"><a class="header" href="#examples-16">Examples</a></h3>
<p>Run all tests:</p>
<pre><code class="language-bash">bashrs test script.sh
</code></pre>
<p>Filter tests:</p>
<pre><code class="language-bash">bashrs test script.sh --pattern "test_deploy*"
</code></pre>
<p>JUnit output for CI:</p>
<pre><code class="language-bash">bashrs test script.sh --format junit &gt; results.xml
</code></pre>
<hr />
<h2 id="bashrs-score---score-bash-script-quality"><a class="header" href="#bashrs-score---score-bash-script-quality"><code>bashrs score</code> - Score Bash Script Quality</a></h2>
<p>Scores bash script quality across multiple dimensions.</p>
<h3 id="usage-17"><a class="header" href="#usage-17">Usage</a></h3>
<pre><code class="language-bash">bashrs score &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-16"><a class="header" href="#arguments-16">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input bash script file</li>
</ul>
<h3 id="options-15"><a class="header" href="#options-15">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code>, <code>markdown</code> (default: <code>human</code>)</li>
<li><code>--detailed</code> - Show detailed dimension scores</li>
</ul>
<h3 id="examples-17"><a class="header" href="#examples-17">Examples</a></h3>
<p>Score script:</p>
<pre><code class="language-bash">bashrs score deploy.sh
</code></pre>
<p>Detailed breakdown:</p>
<pre><code class="language-bash">bashrs score script.sh --detailed
</code></pre>
<p>Markdown report:</p>
<pre><code class="language-bash">bashrs score script.sh --format markdown &gt; QUALITY.md
</code></pre>
<h3 id="scoring-dimensions"><a class="header" href="#scoring-dimensions">Scoring Dimensions</a></h3>
<ul>
<li><strong>Safety</strong>: Security issues (0-100)</li>
<li><strong>Determinism</strong>: Non-deterministic patterns (0-100)</li>
<li><strong>Idempotency</strong>: Re-run safety (0-100)</li>
<li><strong>POSIX Compliance</strong>: Portability (0-100)</li>
<li><strong>Code Quality</strong>: Complexity, style (0-100)</li>
<li><strong>Overall</strong>: Weighted average</li>
</ul>
<hr />
<h2 id="bashrs-audit---comprehensive-quality-audit"><a class="header" href="#bashrs-audit---comprehensive-quality-audit"><code>bashrs audit</code> - Comprehensive Quality Audit</a></h2>
<p>Runs comprehensive quality audit with all checks.</p>
<h3 id="usage-18"><a class="header" href="#usage-18">Usage</a></h3>
<pre><code class="language-bash">bashrs audit &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-17"><a class="header" href="#arguments-17">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input bash script file</li>
</ul>
<h3 id="options-16"><a class="header" href="#options-16">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>human</code>, <code>json</code>, <code>sarif</code> (default: <code>human</code>)</li>
<li><code>--strict</code> - Fail on warnings</li>
<li><code>--detailed</code> - Show detailed check results</li>
<li><code>--min-grade &lt;GRADE&gt;</code> - Minimum required grade (A+, A, B+, B, C+, C, D, F)</li>
</ul>
<h3 id="examples-18"><a class="header" href="#examples-18">Examples</a></h3>
<p>Full audit:</p>
<pre><code class="language-bash">bashrs audit script.sh --detailed
</code></pre>
<p>Strict mode with minimum grade:</p>
<pre><code class="language-bash">bashrs audit deploy.sh --strict --min-grade A
</code></pre>
<p>SARIF for GitHub:</p>
<pre><code class="language-bash">bashrs audit script.sh --format sarif &gt; audit.sarif
</code></pre>
<h3 id="audit-checks"><a class="header" href="#audit-checks">Audit Checks</a></h3>
<ul>
<li>Linting (all rules)</li>
<li>Security scanning</li>
<li>Determinism verification</li>
<li>Idempotency validation</li>
<li>POSIX compliance</li>
<li>Code complexity</li>
<li>Best practices</li>
<li>Documentation quality</li>
</ul>
<hr />
<h2 id="bashrs-coverage---generate-coverage-report"><a class="header" href="#bashrs-coverage---generate-coverage-report"><code>bashrs coverage</code> - Generate Coverage Report</a></h2>
<p>Generates code coverage report for bash scripts.</p>
<h3 id="usage-19"><a class="header" href="#usage-19">Usage</a></h3>
<pre><code class="language-bash">bashrs coverage &lt;FILE&gt; [OPTIONS]
</code></pre>
<h3 id="arguments-18"><a class="header" href="#arguments-18">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;</code> - Input bash script file</li>
</ul>
<h3 id="options-17"><a class="header" href="#options-17">Options</a></h3>
<ul>
<li><code>--format &lt;FORMAT&gt;</code> - Output format: <code>terminal</code>, <code>json</code>, <code>html</code>, <code>lcov</code> (default: <code>terminal</code>)</li>
<li><code>--min &lt;PERCENT&gt;</code> - Minimum coverage percentage required</li>
<li><code>--detailed</code> - Show detailed coverage breakdown</li>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file for HTML/LCOV format</li>
</ul>
<h3 id="examples-19"><a class="header" href="#examples-19">Examples</a></h3>
<p>Terminal coverage:</p>
<pre><code class="language-bash">bashrs coverage script.sh
</code></pre>
<p>HTML report:</p>
<pre><code class="language-bash">bashrs coverage script.sh --format html -o coverage.html
</code></pre>
<p>With minimum threshold:</p>
<pre><code class="language-bash">bashrs coverage script.sh --min 80 --detailed
</code></pre>
<p>LCOV for CI integration:</p>
<pre><code class="language-bash">bashrs coverage script.sh --format lcov -o coverage.lcov
</code></pre>
<hr />
<h2 id="bashrs-format---format-bash-scripts"><a class="header" href="#bashrs-format---format-bash-scripts"><code>bashrs format</code> - Format Bash Scripts</a></h2>
<p>Formats bash scripts according to style guidelines.</p>
<h3 id="usage-20"><a class="header" href="#usage-20">Usage</a></h3>
<pre><code class="language-bash">bashrs format &lt;FILE&gt;... [OPTIONS]
</code></pre>
<h3 id="arguments-19"><a class="header" href="#arguments-19">Arguments</a></h3>
<ul>
<li><code>&lt;FILE&gt;...</code> - Input bash script file(s) (one or more)</li>
</ul>
<h3 id="options-18"><a class="header" href="#options-18">Options</a></h3>
<ul>
<li><code>--check</code> - Check if files are formatted without applying changes</li>
<li><code>--dry-run</code> - Show diff without applying changes</li>
<li><code>-o, --output &lt;FILE&gt;</code> - Output file (for single input file)</li>
</ul>
<h3 id="examples-20"><a class="header" href="#examples-20">Examples</a></h3>
<p>Format single file:</p>
<pre><code class="language-bash">bashrs format script.sh -o script-formatted.sh
</code></pre>
<p>Format in-place:</p>
<pre><code class="language-bash">bashrs format script.sh deploy.sh install.sh
</code></pre>
<p>Check formatting:</p>
<pre><code class="language-bash">bashrs format script.sh --check
</code></pre>
<p>Preview changes:</p>
<pre><code class="language-bash">bashrs format script.sh --dry-run
</code></pre>
<p>Format all scripts:</p>
<pre><code class="language-bash">bashrs format *.sh
</code></pre>
<h3 id="formatting-rules"><a class="header" href="#formatting-rules">Formatting Rules</a></h3>
<ul>
<li>Consistent indentation (2 spaces)</li>
<li>Proper quoting</li>
<li>Aligned assignments</li>
<li>Standard shebang</li>
<li>Function formatting</li>
<li>Comment style</li>
</ul>
<hr />
<h2 id="global-options"><a class="header" href="#global-options">Global Options</a></h2>
<p>All commands accept these global options:</p>
<h3 id="verification-level"><a class="header" href="#verification-level">Verification Level</a></h3>
<pre><code class="language-bash">--verify &lt;LEVEL&gt;
</code></pre>
<ul>
<li><code>none</code> - No verification</li>
<li><code>basic</code> - Basic checks</li>
<li><code>strict</code> - Strict validation (default)</li>
<li><code>paranoid</code> - Maximum validation</li>
</ul>
<h3 id="target-shell-dialect"><a class="header" href="#target-shell-dialect">Target Shell Dialect</a></h3>
<pre><code class="language-bash">--target &lt;DIALECT&gt;
</code></pre>
<ul>
<li><code>posix</code> - POSIX sh (default)</li>
<li><code>bash</code> - GNU Bash</li>
<li><code>dash</code> - Debian Almquist Shell</li>
<li><code>ash</code> - Almquist Shell</li>
</ul>
<h3 id="validation-level"><a class="header" href="#validation-level">Validation Level</a></h3>
<pre><code class="language-bash">--validation &lt;LEVEL&gt;
</code></pre>
<ul>
<li><code>none</code> - No validation</li>
<li><code>minimal</code> - Minimal checks (default)</li>
<li><code>strict</code> - Strict validation</li>
<li><code>paranoid</code> - Maximum validation</li>
</ul>
<h3 id="other-global-options"><a class="header" href="#other-global-options">Other Global Options</a></h3>
<ul>
<li><code>--strict</code> - Fail on warnings</li>
<li><code>-v, --verbose</code> - Enable verbose debug output</li>
</ul>
<h3 id="examples-21"><a class="header" href="#examples-21">Examples</a></h3>
<p>Paranoid verification:</p>
<pre><code class="language-bash">bashrs build src/install.rs --verify paranoid --target posix
</code></pre>
<p>Minimal validation:</p>
<pre><code class="language-bash">bashrs lint script.sh --validation minimal
</code></pre>
<hr />
<h2 id="common-workflows"><a class="header" href="#common-workflows">Common Workflows</a></h2>
<h3 id="workflow-1-transpile-rust-to-shell"><a class="header" href="#workflow-1-transpile-rust-to-shell">Workflow 1: Transpile Rust to Shell</a></h3>
<pre><code class="language-bash"><span class="boring"> Check compatibility
</span>bashrs check src/install.rs

<span class="boring"> Build shell script
</span>bashrs build src/install.rs -o install.sh --emit-proof

<span class="boring"> Verify correctness
</span>bashrs verify src/install.rs install.sh
</code></pre>
<h3 id="workflow-2-purify-existing-bash-script"><a class="header" href="#workflow-2-purify-existing-bash-script">Workflow 2: Purify Existing Bash Script</a></h3>
<pre><code class="language-bash"><span class="boring"> Lint first
</span>bashrs lint deploy.sh

<span class="boring"> Purify with report
</span>bashrs purify deploy.sh -o deploy-purified.sh --report --with-tests

<span class="boring"> Verify it works
</span>bash deploy-purified.sh
</code></pre>
<h3 id="workflow-3-complete-quality-audit"><a class="header" href="#workflow-3-complete-quality-audit">Workflow 3: Complete Quality Audit</a></h3>
<pre><code class="language-bash"><span class="boring"> Full audit
</span>bashrs audit script.sh --detailed --strict

<span class="boring"> Score quality
</span>bashrs score script.sh --detailed

<span class="boring"> Coverage report
</span>bashrs coverage script.sh --format html -o coverage.html

<span class="boring"> Format code
</span>bashrs format script.sh
</code></pre>
<h3 id="workflow-4-config-file-management"><a class="header" href="#workflow-4-config-file-management">Workflow 4: Config File Management</a></h3>
<pre><code class="language-bash"><span class="boring"> Analyze issues
</span>bashrs config analyze ~/.bashrc

<span class="boring"> Lint for problems
</span>bashrs config lint ~/.bashrc

<span class="boring"> Dry run purification
</span>bashrs config purify ~/.bashrc --dry-run

<span class="boring"> Apply fixes with backup
</span>bashrs config purify ~/.bashrc --fix
</code></pre>
<h3 id="workflow-5-interactive-development"><a class="header" href="#workflow-5-interactive-development">Workflow 5: Interactive Development</a></h3>
<pre><code class="language-bash"><span class="boring"> Start REPL
</span>bashrs repl --debug

<span class="boring"> Inside REPL:
</span><span class="boring"> &gt; x=5
</span><span class="boring"> &gt; echo $x
</span><span class="boring"> &gt; :lint echo $x
</span><span class="boring"> &gt; :purify echo $x
</span><span class="boring"> &gt; :quit
</span></code></pre>
<h3 id="workflow-6-cicd-integration"><a class="header" href="#workflow-6-cicd-integration">Workflow 6: CI/CD Integration</a></h3>
<pre><code class="language-bash"><span class="boring"> Lint in CI
</span>bashrs lint script.sh --format json &gt; lint-results.json

<span class="boring"> Quality gates
</span>bashrs audit script.sh --strict --min-grade B --format sarif &gt; audit.sarif

<span class="boring"> Coverage requirements
</span>bashrs coverage script.sh --min 80 --format lcov -o coverage.lcov

<span class="boring"> Benchmark performance
</span>bashrs bench script.sh --verify-determinism -o bench.json
</code></pre>
<hr />
<h2 id="exit-codes"><a class="header" href="#exit-codes">Exit Codes</a></h2>
<p>All commands follow standard exit code conventions:</p>
<ul>
<li><code>0</code> - Success</li>
<li><code>1</code> - Error (linting issues, compilation failure, etc.)</li>
<li><code>2</code> - Invalid usage (missing arguments, invalid options)</li>
</ul>
<hr />
<h2 id="environment-variables"><a class="header" href="#environment-variables">Environment Variables</a></h2>
<h3 id="rash_debug"><a class="header" href="#rash_debug"><code>RASH_DEBUG</code></a></h3>
<p>Enable debug logging:</p>
<pre><code class="language-bash">RASH_DEBUG=1 bashrs build src/main.rs
</code></pre>
<h3 id="rash_no_color"><a class="header" href="#rash_no_color"><code>RASH_NO_COLOR</code></a></h3>
<p>Disable colored output:</p>
<pre><code class="language-bash">RASH_NO_COLOR=1 bashrs lint script.sh
</code></pre>
<h3 id="rash_strict"><a class="header" href="#rash_strict"><code>RASH_STRICT</code></a></h3>
<p>Enable strict mode globally:</p>
<pre><code class="language-bash">RASH_STRICT=1 bashrs audit script.sh
</code></pre>
<hr />
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="../getting-started/installation.html">Getting Started Guide</a></li>
<li><a href="../concepts/purification.html">Purification Concepts</a></li>
<li><a href="../linting/security.html">Security Linting</a></li>
<li><a href="../config/overview.html">Configuration Management</a></li>
<li><a href="../getting-started/repl.html">REPL Usage</a></li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../advanced/performance.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../reference/repl-commands.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../advanced/performance.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../reference/repl-commands.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
