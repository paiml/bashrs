<!DOCTYPE HTML>
<html lang="en" class="rust sidebar-visible" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>REPL User Guide - The Rash Book - Shell Safety and Purification</title>


        <!-- Custom HTML head -->

        <meta name="description" content="A comprehensive guide to Rash: shell safety, purification, and linting">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="../favicon.svg">
        <link rel="shortcut icon" href="../favicon.png">
        <link rel="stylesheet" href="../css/variables.css">
        <link rel="stylesheet" href="../css/general.css">
        <link rel="stylesheet" href="../css/chrome.css">
        <link rel="stylesheet" href="../css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="../FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="../fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="../highlight.css">
        <link rel="stylesheet" href="../tomorrow-night.css">
        <link rel="stylesheet" href="../ayu-highlight.css">

        <!-- Custom theme stylesheets -->


        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "../";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "rust";
        </script>
        <!-- Start loading toc.js asap -->
        <script src="../toc.js"></script>
    </head>
    <body>
    <div id="body-container">
        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            const html = document.documentElement;
            html.classList.remove('rust')
            html.classList.add(theme);
            html.classList.add("js");
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <!-- populated by js -->
            <mdbook-sidebar-scrollbox class="sidebar-scrollbox"></mdbook-sidebar-scrollbox>
            <noscript>
                <iframe class="sidebar-iframe-outer" src="../toc.html"></iframe>
            </noscript>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">The Rash Book - Shell Safety and Purification</h1>

                    <div class="right-buttons">
                        <a href="../print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/paiml/bashrs" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        <a href="https://github.com/paiml/bashrs/edit/main/book/src/repl/user-guide.md" title="Suggest an edit" aria-label="Suggest an edit">
                            <i id="git-edit-button" class="fa fa-edit"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <h1 id="repl-user-guide"><a class="header" href="#repl-user-guide">REPL User Guide</a></h1>
<p>The bashrs REPL (Read-Eval-Print Loop) is an interactive shell analysis environment that helps you write safer, more maintainable shell scripts through real-time feedback and transformations.</p>
<h2 id="why-use-the-repl"><a class="header" href="#why-use-the-repl">Why Use the REPL?</a></h2>
<p>The bashrs REPL transforms how you work with shell scripts:</p>
<ol>
<li><strong>Learn by Doing</strong>: Experiment with bash constructs and see immediate transformations</li>
<li><strong>Rapid Development</strong>: Test script snippets without creating files</li>
<li><strong>Quality Assurance</strong>: Get real-time linting and purification feedback</li>
<li><strong>Interactive Debugging</strong>: Step through scripts and understand their behavior</li>
<li><strong>Safe Experimentation</strong>: Try dangerous commands in a safe environment</li>
</ol>
<h2 id="core-philosophy"><a class="header" href="#core-philosophy">Core Philosophy</a></h2>
<p>The REPL embodies three key principles:</p>
<h3 id="1-immediate-feedback"><a class="header" href="#1-immediate-feedback">1. Immediate Feedback</a></h3>
<p>Every command you type is instantly analyzed, providing feedback on:</p>
<ul>
<li>Syntax correctness (parsing)</li>
<li>Security issues (linting)</li>
<li>Idempotency problems (purification)</li>
<li>Determinism violations (transformation)</li>
</ul>
<pre><code class="language-bash">bashrs [normal]&gt; :lint rm -rf $DIR
Found 1 issue(s):
  ‚ö† 1 warning(s)

[1] ‚ö† SC2086 - Double quote to prevent globbing and word splitting
    Variable: DIR
</code></pre>
<h3 id="2-mode-based-workflow"><a class="header" href="#2-mode-based-workflow">2. Mode-Based Workflow</a></h3>
<p>The REPL supports 5 distinct modes, each optimized for a specific task:</p>
<div class="table-wrapper"><table><thead><tr><th>Mode</th><th>Purpose</th><th>Best For</th></tr></thead><tbody>
<tr><td><strong>normal</strong></td><td>Direct execution</td><td>Testing commands, learning bash</td></tr>
<tr><td><strong>purify</strong></td><td>Automatic purification</td><td>Fixing idempotency issues</td></tr>
<tr><td><strong>lint</strong></td><td>Automatic linting</td><td>Finding security problems</td></tr>
<tr><td><strong>debug</strong></td><td>Step-by-step execution</td><td>Understanding complex scripts</td></tr>
<tr><td><strong>explain</strong></td><td>Interactive explanations</td><td>Learning bash constructs</td></tr>
</tbody></table>
</div>
<p>Switch modes with <code>:mode &lt;name&gt;</code> and let the REPL automatically process your commands.</p>
<h3 id="3-persistent-state"><a class="header" href="#3-persistent-state">3. Persistent State</a></h3>
<p>The REPL maintains session state across commands:</p>
<ul>
<li><strong>Variables</strong>: Set once, use everywhere</li>
<li><strong>Functions</strong>: Load scripts, extract functions</li>
<li><strong>History</strong>: Full command history saved to <code>~/.bashrs_history</code></li>
<li><strong>Context</strong>: Mode and settings persist until changed</li>
</ul>
<h2 id="key-features"><a class="header" href="#key-features">Key Features</a></h2>
<h3 id="-five-interactive-modes"><a class="header" href="#-five-interactive-modes">üéØ Five Interactive Modes</a></h3>
<p>Each mode provides a different lens for analyzing your scripts:</p>
<pre><code class="language-bash"><span class="boring"> Normal: Execute commands directly
</span>bashrs [normal]&gt; echo "Hello, World!"
Hello, World!

<span class="boring"> Purify: Automatic idempotency transformation
</span>bashrs [normal]&gt; :mode purify
bashrs [purify]&gt; mkdir /tmp/app
‚úì Purified: mkdir -p "/tmp/app"

<span class="boring"> Lint: Automatic security analysis
</span>bashrs [purify]&gt; :mode lint
bashrs [lint]&gt; cat $FILE | grep pattern
Found 1 issue(s): ‚ö† SC2086 - Unquoted variable

<span class="boring"> Explain: Interactive learning
</span>bashrs [lint]&gt; :mode explain
bashrs [explain]&gt; ${var:-default}
üìñ Parameter Expansion: Use Default Value...

<span class="boring"> Debug: Step-by-step execution (future)
</span>bashrs [explain]&gt; :mode debug
bashrs [debug]&gt; # Step through complex scripts
</code></pre>
<h3 id="-tab-completion"><a class="header" href="#-tab-completion">‚å®Ô∏è Tab Completion</a></h3>
<p>Intelligent completion speeds up your workflow:</p>
<pre><code class="language-bash"><span class="boring"> Command completion
</span>bashrs [normal]&gt; :mo&lt;TAB&gt;
<span class="boring"> Completes to: :mode
</span>
<span class="boring"> Mode completion
</span>bashrs [normal]&gt; :mode pur&lt;TAB&gt;
<span class="boring"> Completes to: :mode purify
</span>
<span class="boring"> File path completion
</span>bashrs [normal]&gt; :load ex&lt;TAB&gt;
<span class="boring"> Completes to: :load examples/
</span>
<span class="boring"> Bash construct completion
</span>bashrs [explain]&gt; for&lt;TAB&gt;
<span class="boring"> Shows: for i in ...
</span></code></pre>
<h3 id="-multi-line-input"><a class="header" href="#-multi-line-input">üìù Multi-line Input</a></h3>
<p>Natural support for complex constructs:</p>
<pre><code class="language-bash">bashrs [normal]&gt; function deploy() {
... &gt;   echo "Deploying application..."
... &gt;   mkdir -p /var/log/app
... &gt;   systemctl restart app
... &gt; }
‚úì Function 'deploy' defined

bashrs [normal]&gt; for i in 1 2 3; do
... &gt;   echo "Processing item $i"
... &gt; done
Processing item 1
Processing item 2
Processing item 3
</code></pre>
<h3 id="-parser-integration"><a class="header" href="#-parser-integration">üîç Parser Integration</a></h3>
<p>See exactly how bash interprets your code:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :parse if [ -f config.txt ]; then cat config.txt; fi
‚úì Parse successful!
Statements: 1

AST:
  [0] If {
    condition: Test { operator: "-f", args: ["config.txt"] },
    then_body: [ SimpleCommand { name: "cat", args: ["config.txt"] } ],
    else_body: None
  }
</code></pre>
<h3 id="-purifier-integration"><a class="header" href="#-purifier-integration">üßπ Purifier Integration</a></h3>
<p>Transform non-deterministic, non-idempotent code:</p>
<pre><code class="language-bash"><span class="boring"> Automatic purification in purify mode
</span>bashrs [purify]&gt; mkdir /tmp/test
‚úì Purified:
mkdir -p "/tmp/test"

bashrs [purify]&gt; SESSION_ID=$RANDOM
‚úì Purified:
SESSION_ID="$(date +%s)-$$"

bashrs [purify]&gt; rm old_file
‚úì Purified:
rm -f "old_file"
</code></pre>
<h3 id="-linter-integration"><a class="header" href="#-linter-integration">üîé Linter Integration</a></h3>
<p>Real-time diagnostics with severity levels:</p>
<pre><code class="language-bash">bashrs [lint]&gt; cat file.txt | grep $PATTERN
Found 1 issue(s):
  ‚ö† 1 warning(s)

[1] ‚ö† SC2086 - Double quote to prevent globbing and word splitting
    Line 1
    Variable: PATTERN

Fix: cat file.txt | grep "$PATTERN"
</code></pre>
<h3 id="-command-history"><a class="header" href="#-command-history">üìö Command History</a></h3>
<p>Persistent history with powerful navigation:</p>
<pre><code class="language-bash"><span class="boring"> Navigate with arrow keys
</span>‚Üë/‚Üì   - Previous/Next command

<span class="boring"> Search history
</span>Ctrl-R - Reverse search

<span class="boring"> View session history
</span>bashrs [normal]&gt; :history
Command History (5 commands):
  1 echo hello
  2 :parse if [ -f test ]; then echo found; fi
  3 :lint cat file | grep pattern
  4 :mode purify
  5 :history
</code></pre>
<h3 id="-script-loading"><a class="header" href="#-script-loading">üì¶ Script Loading</a></h3>
<p>Load and analyze complete scripts:</p>
<pre><code class="language-bash"><span class="boring"> Load a script to inspect it
</span>bashrs [normal]&gt; :load deploy.sh
‚úì Loaded: deploy.sh (5 functions, 120 lines)

<span class="boring"> View extracted functions
</span>bashrs [normal]&gt; :functions
Available functions (5 total):
  1 validate_env
  2 build_app
  3 run_tests
  4 deploy_staging
  5 deploy_production

<span class="boring"> Reload after editing
</span>bashrs [normal]&gt; :reload
Reloading: deploy.sh
‚úì Reloaded: deploy.sh (5 functions, 125 lines)
</code></pre>
<h3 id="-session-variables"><a class="header" href="#-session-variables">üîß Session Variables</a></h3>
<p>Bash-style variable assignment and expansion:</p>
<pre><code class="language-bash">bashrs [normal]&gt; app_name="myapp"
‚úì Variable set: app_name = myapp

bashrs [normal]&gt; version=1.0.0
‚úì Variable set: version = 1.0.0

bashrs [normal]&gt; echo $app_name v$version
myapp v1.0.0

<span class="boring"> View all variables
</span>bashrs [normal]&gt; :vars
Session Variables (2 variables):
  app_name = myapp
  version = 1.0.0
</code></pre>
<h2 id="common-workflows"><a class="header" href="#common-workflows">Common Workflows</a></h2>
<h3 id="workflow-1-learning-bash"><a class="header" href="#workflow-1-learning-bash">Workflow 1: Learning Bash</a></h3>
<p>Perfect for beginners and experienced users exploring new constructs:</p>
<pre><code class="language-bash"><span class="boring"> Step 1: Start in explain mode
</span>$ bashrs repl
bashrs [normal]&gt; :mode explain
Switched to explain mode

<span class="boring"> Step 2: Explore bash constructs
</span>bashrs [explain]&gt; ${var:-default}
üìñ Parameter Expansion: ${parameter:-word}
   Use Default Value

If parameter is unset or null, expand to 'word'.
Example:
  $ var=""
  $ echo "${var:-fallback}"  # Outputs: fallback

<span class="boring"> Step 3: Try variations
</span>bashrs [explain]&gt; ${var:=default}
üìñ Parameter Expansion: ${parameter:=word}
   Assign Default Value...

<span class="boring"> Step 4: Test with parse
</span>bashrs [explain]&gt; :parse echo ${var:-default}
‚úì Parse successful!

<span class="boring"> Step 5: Switch to normal mode and try it
</span>bashrs [explain]&gt; :mode normal
bashrs [normal]&gt; echo ${missing:-"fallback"}
fallback
</code></pre>
<h3 id="workflow-2-script-development"><a class="header" href="#workflow-2-script-development">Workflow 2: Script Development</a></h3>
<p>Iterative development with immediate feedback:</p>
<pre><code class="language-bash"><span class="boring"> Step 1: Start in normal mode, load your script
</span>$ bashrs repl
bashrs [normal]&gt; :load myapp.sh
‚úì Loaded: myapp.sh (3 functions, 50 lines)

<span class="boring"> Step 2: Check for issues in lint mode
</span>bashrs [normal]&gt; :mode lint
bashrs [lint]&gt; :load myapp.sh
Found 5 issue(s):
  ‚ö† 3 warning(s)
  ‚Ñπ 2 info

<span class="boring"> Step 3: Fix issues in your editor
</span><span class="boring"> (Edit myapp.sh externally)
</span>
<span class="boring"> Step 4: Reload and verify
</span>bashrs [lint]&gt; :reload
Reloading: myapp.sh
‚úì No issues found!

<span class="boring"> Step 5: Check purification
</span>bashrs [lint]&gt; :mode purify
bashrs [purify]&gt; :load myapp.sh
‚úì Script is already purified!
</code></pre>
<h3 id="workflow-3-quick-validation"><a class="header" href="#workflow-3-quick-validation">Workflow 3: Quick Validation</a></h3>
<p>Validate bash snippets before committing:</p>
<pre><code class="language-bash"><span class="boring"> Step 1: Copy code to clipboard
</span><span class="boring"> (e.g., from your editor)
</span>
<span class="boring"> Step 2: Start REPL in lint mode
</span>$ bashrs repl
bashrs [normal]&gt; :mode lint
Switched to lint mode

<span class="boring"> Step 3: Paste and check
</span>bashrs [lint]&gt; rm -rf $TEMP_DIR &amp;&amp; mkdir $TEMP_DIR
Found 2 issue(s):
  ‚ö† 2 warning(s)

[1] ‚ö† SC2086 - Unquoted variable: TEMP_DIR
[2] ‚ö† SC2086 - Unquoted variable: TEMP_DIR

<span class="boring"> Step 4: Get purified version
</span>bashrs [lint]&gt; :mode purify
bashrs [purify]&gt; rm -rf $TEMP_DIR &amp;&amp; mkdir $TEMP_DIR
‚úì Purified:
rm -rf "$TEMP_DIR" &amp;&amp; mkdir -p "$TEMP_DIR"

<span class="boring"> Step 5: Copy purified code back to your editor
</span></code></pre>
<h3 id="workflow-4-interactive-debugging"><a class="header" href="#workflow-4-interactive-debugging">Workflow 4: Interactive Debugging</a></h3>
<p>Understand complex scripts step by step:</p>
<pre><code class="language-bash"><span class="boring"> Step 1: Load a complex script
</span>bashrs [normal]&gt; :load complex_deploy.sh
‚úì Loaded: complex_deploy.sh (10 functions, 300 lines)

<span class="boring"> Step 2: Parse specific sections
</span>bashrs [normal]&gt; :parse cat complex_deploy.sh | grep "function validate"
‚úì Parse successful!

<span class="boring"> Step 3: Explain confusing constructs
</span>bashrs [normal]&gt; :mode explain
bashrs [explain]&gt; ${VERSION:?Error: VERSION not set}
üìñ Parameter Expansion: ${parameter:?word}
   Error if Null or Unset...

<span class="boring"> Step 4: Test in normal mode
</span>bashrs [explain]&gt; :mode normal
bashrs [normal]&gt; unset VERSION
bashrs [normal]&gt; echo ${VERSION:?Error: VERSION not set}
bash: VERSION: Error: VERSION not set
</code></pre>
<h3 id="workflow-5-cicd-pipeline-development"><a class="header" href="#workflow-5-cicd-pipeline-development">Workflow 5: CI/CD Pipeline Development</a></h3>
<p>Build and test deployment scripts:</p>
<pre><code class="language-bash"><span class="boring"> Step 1: Create variables for your environment
</span>bashrs [normal]&gt; env=staging
bashrs [normal]&gt; region=us-west-2
bashrs [normal]&gt; app_version=v2.1.0

<span class="boring"> Step 2: Test deployment commands
</span>bashrs [normal]&gt; echo "Deploying $app_version to $env in $region"
Deploying v2.1.0 to staging in us-west-2

<span class="boring"> Step 3: Check for issues
</span>bashrs [normal]&gt; :lint docker build -t $app_version .
Found 1 issue(s):
  ‚ö† 1 warning(s)

<span class="boring"> Step 4: Build purified script
</span>bashrs [normal]&gt; :mode purify
bashrs [purify]&gt; docker build -t $app_version .
‚úì Purified:
docker build -t "$app_version" .

<span class="boring"> Step 5: Save history to script file
</span>bashrs [purify]&gt; :history
Command History (...)
<span class="boring"> Copy relevant commands to deploy.sh
</span></code></pre>
<h2 id="advanced-tips"><a class="header" href="#advanced-tips">Advanced Tips</a></h2>
<h3 id="tip-1-combine-modes-with-explicit-commands"><a class="header" href="#tip-1-combine-modes-with-explicit-commands">Tip 1: Combine Modes with Explicit Commands</a></h3>
<p>Even in purify/lint mode, you can use explicit commands:</p>
<pre><code class="language-bash">bashrs [purify]&gt; mkdir /tmp/test
‚úì Purified: mkdir -p "/tmp/test"

<span class="boring"> But you can still parse or lint explicitly
</span>bashrs [purify]&gt; :parse mkdir /tmp/test
‚úì Parse successful!

bashrs [purify]&gt; :lint mkdir /tmp/test
‚úì No issues found!
</code></pre>
<h3 id="tip-2-use-variables-for-complex-commands"><a class="header" href="#tip-2-use-variables-for-complex-commands">Tip 2: Use Variables for Complex Commands</a></h3>
<p>Build up complex commands incrementally:</p>
<pre><code class="language-bash">bashrs [normal]&gt; host=example.com
bashrs [normal]&gt; port=8080
bashrs [normal]&gt; protocol=https

bashrs [normal]&gt; url="$protocol://$host:$port/api"
‚úì Variable set: url = https://example.com:8080/api

bashrs [normal]&gt; curl $url/health
<span class="boring"> Test the command
</span></code></pre>
<h3 id="tip-3-load-multiple-scripts"><a class="header" href="#tip-3-load-multiple-scripts">Tip 3: Load Multiple Scripts</a></h3>
<p>Build a development environment:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :load lib/utils.sh
‚úì Loaded: lib/utils.sh (5 functions)

bashrs [normal]&gt; :load lib/deploy.sh
‚úì Loaded: lib/deploy.sh (3 functions)

bashrs [normal]&gt; :functions
Available functions (8 total):
  1 log_info
  2 log_error
  3 check_deps
  4 validate_env
  5 retry_command
  6 deploy_app
  7 rollback_app
  8 health_check
</code></pre>
<h3 id="tip-4-use-history-search"><a class="header" href="#tip-4-use-history-search">Tip 4: Use History Search</a></h3>
<p>Find previous commands quickly:</p>
<pre><code class="language-bash"><span class="boring"> Press Ctrl-R, then type search term
</span>(reverse-i-search)'purify': :purify mkdir /tmp/app

<span class="boring"> Press Ctrl-R again to cycle through matches
</span></code></pre>
<h3 id="tip-5-clear-screen-for-fresh-start"><a class="header" href="#tip-5-clear-screen-for-fresh-start">Tip 5: Clear Screen for Fresh Start</a></h3>
<p>Keep your terminal organized:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :clear
<span class="boring"> Or use Ctrl-L
</span>
<span class="boring"> Fresh prompt, clean slate
</span>bashrs [normal]&gt;
</code></pre>
<h2 id="configuration-options"><a class="header" href="#configuration-options">Configuration Options</a></h2>
<p>Customize REPL behavior with command-line flags:</p>
<pre><code class="language-bash"><span class="boring"> Enable debug mode for verbose output
</span>$ bashrs repl --debug

<span class="boring"> Set resource limits
</span>$ bashrs repl --max-memory 200 --timeout 60

<span class="boring"> Run in sandboxed mode (restricted operations)
</span>$ bashrs repl --sandboxed

<span class="boring"> Combine options
</span>$ bashrs repl --debug --max-memory 1000 --timeout 300
</code></pre>
<h3 id="available-options"><a class="header" href="#available-options">Available Options</a></h3>
<div class="table-wrapper"><table><thead><tr><th>Option</th><th>Default</th><th>Description</th></tr></thead><tbody>
<tr><td><code>--debug</code></td><td>false</td><td>Enable debug mode with verbose output</td></tr>
<tr><td><code>--max-memory &lt;MB&gt;</code></td><td>500</td><td>Maximum memory usage in MB</td></tr>
<tr><td><code>--timeout &lt;SECONDS&gt;</code></td><td>120</td><td>Command timeout in seconds</td></tr>
<tr><td><code>--max-depth &lt;N&gt;</code></td><td>1000</td><td>Maximum recursion depth</td></tr>
<tr><td><code>--sandboxed</code></td><td>false</td><td>Run in sandboxed mode (restricted operations)</td></tr>
</tbody></table>
</div>
<h2 id="troubleshooting"><a class="header" href="#troubleshooting">Troubleshooting</a></h2>
<h3 id="problem-repl-wont-start"><a class="header" href="#problem-repl-wont-start">Problem: REPL Won't Start</a></h3>
<p><strong>Symptoms</strong>:</p>
<pre><code class="language-bash">$ bashrs repl
Failed to initialize REPL: Terminal error
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p>Check terminal compatibility:</p>
<pre><code class="language-bash">$ echo $TERM
<span class="boring"> Should show: xterm-256color, screen-256color, etc.
</span></code></pre>
</li>
<li>
<p>Test ANSI support:</p>
<pre><code class="language-bash">$ echo -e "\e[1mBold\e[0m"
<span class="boring"> Should display "Bold" in bold text
</span></code></pre>
</li>
<li>
<p>Try a different terminal (e.g., iTerm2, GNOME Terminal, Windows Terminal)</p>
</li>
</ol>
<h3 id="problem-history-not-persisting"><a class="header" href="#problem-history-not-persisting">Problem: History Not Persisting</a></h3>
<p><strong>Symptoms</strong>: Commands not saved across sessions</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p>Check history file permissions:</p>
<pre><code class="language-bash">$ ls -la ~/.bashrs_history
<span class="boring"> Should be readable/writable by your user
</span>
$ chmod 600 ~/.bashrs_history
</code></pre>
</li>
<li>
<p>Check disk space:</p>
<pre><code class="language-bash">$ df -h ~
</code></pre>
</li>
<li>
<p>Verify write permissions:</p>
<pre><code class="language-bash">$ touch ~/.bashrs_history
$ echo "test" &gt;&gt; ~/.bashrs_history
</code></pre>
</li>
</ol>
<h3 id="problem-tab-completion-not-working"><a class="header" href="#problem-tab-completion-not-working">Problem: Tab Completion Not Working</a></h3>
<p><strong>Symptoms</strong>: Tab key doesn't complete commands</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Ensure you're using a compatible terminal</li>
<li>Update to latest bashrs version</li>
<li>Check if Ctrl-I works as alternative to Tab</li>
</ol>
<h3 id="problem-out-of-memory"><a class="header" href="#problem-out-of-memory">Problem: Out of Memory</a></h3>
<p><strong>Symptoms</strong>:</p>
<pre><code class="language-bash">REPL out of memory
</code></pre>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p>Increase memory limit:</p>
<pre><code class="language-bash">$ bashrs repl --max-memory 1000  # 1GB
</code></pre>
</li>
<li>
<p>Avoid loading very large scripts (&gt;1MB)</p>
</li>
<li>
<p>Clear history periodically:</p>
<pre><code class="language-bash">$ rm ~/.bashrs_history
</code></pre>
</li>
</ol>
<h3 id="problem-multiline-input-stuck"><a class="header" href="#problem-multiline-input-stuck">Problem: Multiline Input Stuck</a></h3>
<p><strong>Symptoms</strong>: REPL shows <code>... &gt;</code> prompt indefinitely</p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>Press <code>Ctrl-C</code> to cancel multiline input</li>
<li>Complete the construct (add missing <code>fi</code>, <code>done</code>, <code>}</code>, etc.)</li>
<li>Check for unclosed quotes</li>
</ol>
<h3 id="problem-variables-not-expanding"><a class="header" href="#problem-variables-not-expanding">Problem: Variables Not Expanding</a></h3>
<p><strong>Symptoms</strong>: <code>echo $var</code> shows literal <code>$var</code></p>
<p><strong>Solutions</strong>:</p>
<ol>
<li>
<p>Ensure variable was set:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :vars
</code></pre>
</li>
<li>
<p>Check variable name syntax (must start with letter/underscore)</p>
</li>
<li>
<p>Verify you're in normal mode (variable expansion works in all modes)</p>
</li>
</ol>
<h2 id="best-practices"><a class="header" href="#best-practices">Best Practices</a></h2>
<h3 id="1-start-in-normal-mode"><a class="header" href="#1-start-in-normal-mode">1. Start in Normal Mode</a></h3>
<p>Begin every session in normal mode to establish your environment:</p>
<pre><code class="language-bash">$ bashrs repl
bashrs [normal]&gt; # Set up variables
bashrs [normal]&gt; env=production
bashrs [normal]&gt; region=us-east-1
</code></pre>
<h3 id="2-use-modes-for-specific-tasks"><a class="header" href="#2-use-modes-for-specific-tasks">2. Use Modes for Specific Tasks</a></h3>
<p>Switch to specialized modes when needed:</p>
<ul>
<li><strong>Purify mode</strong>: When fixing idempotency issues</li>
<li><strong>Lint mode</strong>: When checking security</li>
<li><strong>Explain mode</strong>: When learning new constructs</li>
<li><strong>Debug mode</strong>: When troubleshooting complex scripts</li>
</ul>
<h3 id="3-leverage-tab-completion"><a class="header" href="#3-leverage-tab-completion">3. Leverage Tab Completion</a></h3>
<p>Save time and reduce errors:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :mo&lt;TAB&gt;pur&lt;TAB&gt;&lt;ENTER&gt;
<span class="boring"> Result: :mode purify
</span></code></pre>
<h3 id="4-use-history-to-build-scripts"><a class="header" href="#4-use-history-to-build-scripts">4. Use :history to Build Scripts</a></h3>
<p>Review your session and extract working commands:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :history
<span class="boring"> Copy successful commands to a script file
</span></code></pre>
<h3 id="5-load-scripts-early"><a class="header" href="#5-load-scripts-early">5. Load Scripts Early</a></h3>
<p>Start with your script loaded for context:</p>
<pre><code class="language-bash">$ bashrs repl
bashrs [normal]&gt; :load myproject.sh
bashrs [normal]&gt; # Now work with your script context
</code></pre>
<h3 id="6-combine-linting-and-purification"><a class="header" href="#6-combine-linting-and-purification">6. Combine Linting and Purification</a></h3>
<p>Always check both:</p>
<pre><code class="language-bash">bashrs [normal]&gt; :lint rm $FILE
<span class="boring"> Check for issues
</span>
bashrs [normal]&gt; :purify rm $FILE
<span class="boring"> Get safe version
</span></code></pre>
<h3 id="7-use-variables-for-repetitive-values"><a class="header" href="#7-use-variables-for-repetitive-values">7. Use Variables for Repetitive Values</a></h3>
<p>Reduce typing and errors:</p>
<pre><code class="language-bash">bashrs [normal]&gt; base_dir=/var/lib/myapp
bashrs [normal]&gt; config_dir=$base_dir/config
bashrs [normal]&gt; data_dir=$base_dir/data
</code></pre>
<h2 id="keyboard-shortcuts-reference"><a class="header" href="#keyboard-shortcuts-reference">Keyboard Shortcuts Reference</a></h2>
<div class="table-wrapper"><table><thead><tr><th>Shortcut</th><th>Action</th></tr></thead><tbody>
<tr><td><code>Tab</code></td><td>Auto-complete commands, modes, files</td></tr>
<tr><td><code>Ctrl-C</code></td><td>Cancel current line / Cancel multiline input</td></tr>
<tr><td><code>Ctrl-D</code></td><td>Exit REPL (EOF)</td></tr>
<tr><td><code>Ctrl-L</code></td><td>Clear screen (alias for <code>:clear</code>)</td></tr>
<tr><td><code>Ctrl-U</code></td><td>Delete line before cursor</td></tr>
<tr><td><code>Ctrl-K</code></td><td>Delete line after cursor</td></tr>
<tr><td><code>Ctrl-W</code></td><td>Delete word before cursor</td></tr>
<tr><td><code>‚Üë</code></td><td>Previous command (history)</td></tr>
<tr><td><code>‚Üì</code></td><td>Next command (history)</td></tr>
<tr><td><code>Ctrl-R</code></td><td>Reverse search history</td></tr>
<tr><td><code>Ctrl-A</code></td><td>Move cursor to start of line</td></tr>
<tr><td><code>Ctrl-E</code></td><td>Move cursor to end of line</td></tr>
</tbody></table>
</div>
<h2 id="next-steps"><a class="header" href="#next-steps">Next Steps</a></h2>
<p>Now that you understand the REPL fundamentals, explore:</p>
<ol>
<li><strong><a href="./tutorial.html">Tutorial: Your First REPL Session</a></strong> - Hands-on walkthrough</li>
<li><strong><a href="../reference/repl-commands.html">REPL Commands Reference</a></strong> - Complete command reference</li>
<li><strong><a href="../concepts/purification.html">Purification Concepts</a></strong> - Understanding transformations</li>
<li><strong><a href="../linting/security.html">Linting Rules</a></strong> - Security and quality rules</li>
</ol>
<h2 id="see-also"><a class="header" href="#see-also">See Also</a></h2>
<ul>
<li><a href="../getting-started/repl.html">Interactive REPL (Getting Started)</a> - Quick start guide</li>
<li><a href="../reference/cli.html">CLI Commands Reference</a> - bashrs CLI documentation</li>
<li><a href="../reference/configuration.html">Configuration</a> - Configuration options</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                            <a rel="prev" href="../repl/tutorial.html" class="mobile-nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                                <i class="fa fa-angle-left"></i>
                            </a>

                            <a rel="next prefetch" href="../concepts/purification.html" class="mobile-nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                                <i class="fa fa-angle-right"></i>
                            </a>

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                    <a rel="prev" href="../repl/tutorial.html" class="nav-chapters previous" title="Previous chapter" aria-label="Previous chapter" aria-keyshortcuts="Left">
                        <i class="fa fa-angle-left"></i>
                    </a>

                    <a rel="next prefetch" href="../concepts/purification.html" class="nav-chapters next" title="Next chapter" aria-label="Next chapter" aria-keyshortcuts="Right">
                        <i class="fa fa-angle-right"></i>
                    </a>
            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>

        <script src="../ace.js"></script>
        <script src="../editor.js"></script>
        <script src="../mode-rust.js"></script>
        <script src="../theme-dawn.js"></script>
        <script src="../theme-tomorrow_night.js"></script>

        <script src="../elasticlunr.min.js"></script>
        <script src="../mark.min.js"></script>
        <script src="../searcher.js"></script>

        <script src="../clipboard.min.js"></script>
        <script src="../highlight.js"></script>
        <script src="../book.js"></script>

        <!-- Custom JS scripts -->


    </div>
    </body>
</html>
